<?xml version="1.0" encoding="utf-8"?>
<Defs>

  <!-- Blood warmer -->
  
  <HediffDef ParentName="AddedBodyPartBase" MayRequire="Ludeon.RimWorld.Anomaly">
    <defName>BloodWarmer</defName>
    <label>blood warmer</label>
    <description>A modified human kidney reconfigured to heat the blood of a ghoul, allowing survival in extremely cold environments.</description>
    <spawnThingOnRemoved>BloodWarmer</spawnThingOnRemoved>
    <stages>
      <li>
        <statOffsets>
          <ComfyTemperatureMin>-26</ComfyTemperatureMin>
        </statOffsets>
      </li>
    </stages>
    <addedPartProps>
      <solid>true</solid>
      <partEfficiency>0.8</partEfficiency>
    </addedPartProps>
  </HediffDef>

  <ThingDef ParentName="BodyPartGhoulBase" MayRequire="Ludeon.RimWorld.Anomaly">
    <defName>BloodWarmer</defName>
    <label>blood warmer</label>
    <description>A special bioferrite prosthetic that actively heats a ghoul's blood, allowing it to survive in cold environments. The prosthetic replaces a ghoul's kidney, heating the blood as it passes through.\n\nDue to the extremely painful nature of the prosthetic, only ghouls can tolerate this enhancement.</description>
    <descriptionHyperlinks><RecipeDef>InstallBloodWarmer</RecipeDef></descriptionHyperlinks>
    <statBases>
      <Mass>0.3</Mass>
      <WorkToMake>13200</WorkToMake>
    </statBases>
    <techHediffsTags>
      <li>Ghoul</li>
    </techHediffsTags>
    <costList>
      <Bioferrite>10</Bioferrite>
      <ComponentIndustrial>1</ComponentIndustrial>
      <Chemfuel>10</Chemfuel>
    </costList>
    <recipeMaker>
      <workSpeedStat>GeneralLaborSpeed</workSpeedStat>
      <workSkill>Crafting</workSkill>
      <effectWorking>Smith</effectWorking>
      <soundWorking>Recipe_Smith</soundWorking>
      <unfinishedThingDef>UnfinishedHealthItemGhoul</unfinishedThingDef>
      <skillRequirements>
        <Crafting>4</Crafting>
      </skillRequirements>
      <researchPrerequisite>GhoulEnhancements</researchPrerequisite>
      <recipeUsers>
        <li>BioferriteShaper</li>
      </recipeUsers>
      <displayPriority>160</displayPriority>
    </recipeMaker>
  </ThingDef>

  <RecipeDef ParentName="SurgeryInstallImplantBase" MayRequire="Ludeon.RimWorld.Anomaly">
    <defName>InstallBloodWarmer</defName>
    <label>install blood warmer</label>
    <description>Install blood warmer.</description>
    <descriptionHyperlinks>
      <ThingDef>BloodWarmer</ThingDef>
      <HediffDef>BloodWarmer</HediffDef>
    </descriptionHyperlinks>
    <jobString>Installing blood warmer.</jobString>
    <skillRequirements Inherit="false" />
    <anesthetize>false</anesthetize>
    <surgeryOutcomeEffect IsNull="True" /> <!-- Always succeeds -->
    <mutantPrerequisite>
      <li>Ghoul</li>
    </mutantPrerequisite>
    <ingredients Inherit="false">
      <li>
        <filter>
          <thingDefs>
            <li>BloodWarmer</li>
          </thingDefs>
        </filter>
        <count>1</count>
      </li>
    </ingredients>
    <fixedIngredientFilter>
      <thingDefs>
        <li>BloodWarmer</li>
      </thingDefs>
    </fixedIngredientFilter>
    <appliedOnFixedBodyParts>
      <li>Kidney</li>
    </appliedOnFixedBodyParts>
    <addsHediff>BloodWarmer</addsHediff>
  </RecipeDef>

  <!-- Pilot assistant -->

  <HediffDef ParentName="ImplantHediffBase">
    <defName>PilotAssistant</defName>
    <label>pilot assistant</label>
    <labelNoun>a pilot assistant</labelNoun>
    <description>An installed pilot assistant. This neural interface connects a pilot's brain directly to a vehicle, enhancing the pilot's control and reaction speed.</description>
    <descriptionHyperlinks>
      <ThingDef>PilotAssistant</ThingDef>
    </descriptionHyperlinks>
    <spawnThingOnRemoved>PilotAssistant</spawnThingOnRemoved>
    <stages>
      <li>
        <statOffsets>
          <PilotingAbility>0.45</PilotingAbility>
        </statOffsets>
      </li>
    </stages>
    <comps>
      <li Class="HediffCompProperties_ReactOnDamage">
        <damageDefIncoming>EMP</damageDefIncoming>
        <createHediff>BrainShock</createHediff>
      </li>
    </comps>
  </HediffDef>

  <ThingDef ParentName="BodyPartBionicBase">
    <defName>PilotAssistant</defName>
    <label>pilot assistant</label>
    <description>A neural interface that connects a pilot's brain directly to a vehicle, enhancing the pilot's control and reaction speed. Just don't think about crashing.</description>
    <descriptionHyperlinks>
      <RecipeDef>InstallPilotAssistant</RecipeDef>
    </descriptionHyperlinks>
    <thingSetMakerTags>
      <li>RewardStandardLowFreq</li>
    </thingSetMakerTags>
    <costList>
      <Plasteel>10</Plasteel>
      <ComponentSpacer>2</ComponentSpacer>
    </costList>
    <recipeMaker>
      <researchPrerequisite>AdvancedGravtech</researchPrerequisite>
    </recipeMaker>
  </ThingDef>

  <RecipeDef ParentName="SurgeryInstallImplantBase">
    <defName>InstallPilotAssistant</defName>
    <label>install pilot assistant</label>
    <description>Install a pilot assistant.</description>
    <descriptionHyperlinks>
      <ThingDef>PilotAssistant</ThingDef>
      <HediffDef>PilotAssistant</HediffDef>
    </descriptionHyperlinks>
    <jobString>Installing pilot assistant.</jobString>
    <ingredients>
      <li>
        <filter>
          <thingDefs>
            <li>PilotAssistant</li>
          </thingDefs>
        </filter>
        <count>1</count>
      </li>
    </ingredients>
    <fixedIngredientFilter>
      <thingDefs>
        <li>PilotAssistant</li>
      </thingDefs>
    </fixedIngredientFilter>
    <appliedOnFixedBodyParts>
      <li>Brain</li>
    </appliedOnFixedBodyParts>
    <addsHediff>PilotAssistant</addsHediff>
  </RecipeDef>

  <RecipeDef ParentName="SurgeryRemoveImplantBase">
    <defName>RemovePilotAssistant</defName>
    <label>remove pilot assistant</label>
    <description>Remove pilot assistant.</description>
    <descriptionHyperlinks>
      <ThingDef>PilotAssistant</ThingDef>
      <HediffDef>PilotAssistant</HediffDef>
    </descriptionHyperlinks>
    <jobString>Removing pilot assistant.</jobString>
    <removesHediff>PilotAssistant</removesHediff>
  </RecipeDef>

  <HediffDef>
    <defName>SentienceCatalyst</defName>
    <label>sentience catalyst</label>
    <labelNoun>sentience catalyst</labelNoun>
    <description>Special mechanites have enhanced the neural pathways of this animal, allowing for training that would not otherwise be possible.</description>
    <hediffClass>Hediff_SentienceCatalyst</hediffClass>
    <isBad>false</isBad>
    <stages>
      <li>
        <statOffsets>
          <Wildness>-0.25</Wildness>
        </statOffsets>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <offset>0.1</offset>
          </li>
        </capMods>
      </li>
    </stages>
  </HediffDef>
  
</Defs>