<?xml version="1.0" encoding="utf-8"?>
<Defs>

  <AbilityDef>
    <defName>SludgeSpew</defName>
    <label>sludge spew</label>
    <description>Spray an acidic sludge all over the target area. The sludge will stick to targets and burn them.</description>
    <iconPath>UI/Commands/SludgeSpray</iconPath>
    <cooldownTicksRange>5000</cooldownTicksRange> <!-- 2 hours -->
    <aiCanUse>true</aiCanUse>
    <displayOrder>300</displayOrder>
    <displayGizmoWhileUndrafted>true</displayGizmoWhileUndrafted>
    <disableGizmoWhileUndrafted>false</disableGizmoWhileUndrafted>
    <warmupStartSound>AcidSpray_Warmup</warmupStartSound>
    <verbProperties>
      <verbClass>Verb_CastAbility</verbClass>
      <range>6.9</range>
      <warmupTime>0.5</warmupTime>
      <soundCast>AcidSpray_Resolve</soundCast>
      <targetParams>
        <canTargetLocations>true</canTargetLocations>
      </targetParams>
    </verbProperties>
    <comps>
      <li Class="CompProperties_AbilitySprayLiquid">
        <projectileDef>Proj_SludgeSpray</projectileDef>
        <numCellsToHit>9</numCellsToHit>
        <sprayEffecter>AcidSpray_Directional</sprayEffecter>
      </li>
    </comps>
  </AbilityDef>
  <ThingDef>
    <defName>Proj_SludgeSpray</defName>
    <label>sludge</label>
    <thingClass>Projectile_Liquid</thingClass>
    <category>Projectile</category>
    <tickerType>Normal</tickerType>
    <altitudeLayer>Projectile</altitudeLayer>
    <useHitPoints>False</useHitPoints>
    <neverMultiSelect>True</neverMultiSelect>
    <graphicData>
      <texPath>Things/Projectile/SludgeSpray</texPath>
      <graphicClass>Graphic_Random</graphicClass>
      <shaderType>MoteGlow</shaderType>
      <drawSize>0.85</drawSize>
    </graphicData>
    <projectile>
      <damageDef>AcidBurn</damageDef>
      <speed>25</speed>
      <damageAmountBase>6</damageAmountBase>
      <arcHeightFactor>0.4</arcHeightFactor>
      <armorPenetrationBase>0.2</armorPenetrationBase>
      <stoppingPower>1</stoppingPower>
      <shadowSize>0</shadowSize>
      <spawnTerrain>InsectSludge</spawnTerrain>
      <terrainChance>0.75</terrainChance>
      <filth>Filth_Slime</filth>
      <filthCount>1</filthCount>
      <filthChance>0.25</filthChance>
    </projectile>
  </ThingDef>

  <AbilityDef>
    <defName>EggSpew</defName>
    <label>egg spew</label>
    <description>Launch an egg sac and a spray of acidic sludge at the target area. The sludge will stick to targets and burn them.</description>
    <iconPath>UI/Commands/EggSpew</iconPath>
    <cooldownTicksRange>5000</cooldownTicksRange> <!-- 2 hours -->
    <aiCanUse>true</aiCanUse>
    <displayOrder>300</displayOrder>
    <displayGizmoWhileUndrafted>true</displayGizmoWhileUndrafted>
    <disableGizmoWhileUndrafted>false</disableGizmoWhileUndrafted>
    <warmupStartSound>AcidSpray_Warmup</warmupStartSound>
    <verbProperties>
      <verbClass>Verb_CastAbility</verbClass>
      <range>14.9</range>
      <warmupTime>0.25</warmupTime>
      <soundCast>AcidSpray_Resolve</soundCast>
      <targetParams>
        <canTargetLocations>true</canTargetLocations>
      </targetParams>
    </verbProperties>
    <comps>
      <li Class="CompProperties_AbilitySprayLiquid">
        <projectileDef>Proj_StrongSludgeSpray</projectileDef>
        <numCellsToHit>18</numCellsToHit>
        <sprayEffecter>AcidSpray_Directional</sprayEffecter>
      </li>
      <li Class="CompProperties_AbilityLaunchProjectile">
        <projectileDef>Proj_EggSac</projectileDef>
      </li>
    </comps>
  </AbilityDef>
  <ThingDef>
    <defName>Proj_StrongSludgeSpray</defName>
    <label>sludge</label>
    <thingClass>Projectile_Liquid</thingClass>
    <category>Projectile</category>
    <tickerType>Normal</tickerType>
    <altitudeLayer>Projectile</altitudeLayer>
    <useHitPoints>False</useHitPoints>
    <neverMultiSelect>True</neverMultiSelect>
    <graphicData>
      <texPath>Things/Projectile/SludgeSpray</texPath>
      <graphicClass>Graphic_Random</graphicClass>
      <shaderType>MoteGlow</shaderType>
      <drawSize>0.85</drawSize>
    </graphicData>
    <projectile>
      <damageDef>AcidBurn</damageDef>
      <speed>25</speed>
      <damageAmountBase>18</damageAmountBase>
      <arcHeightFactor>0.4</arcHeightFactor>
      <armorPenetrationBase>0.1</armorPenetrationBase>
      <stoppingPower>1</stoppingPower>
      <shadowSize>0</shadowSize>
      <spawnTerrain>InsectSludge</spawnTerrain>
      <terrainChance>0.75</terrainChance>
      <filth>Filth_Slime</filth>
      <filthCount>1</filthCount>
      <filthChance>0.25</filthChance>
    </projectile>
  </ThingDef>
  <ThingDef ParentName="BaseGrenadeProjectile">
    <defName>Proj_EggSac</defName>
    <label>egg sac</label>
    <thingClass>Projectile_SpawnsThing</thingClass>
    <graphicData>
      <texPath>Things/Projectile/EggSac</texPath>
      <graphicClass>Graphic_Random</graphicClass>
    </graphicData>
    <projectile>
      <damageDef>Bullet</damageDef>
      <speed>21</speed>
      <damageAmountBase>0</damageAmountBase>
      <spawnsThingDef>EggSac</spawnsThingDef>
      <tryAdjacentFreeSpaces>true</tryAdjacentFreeSpaces>
    </projectile>
  </ThingDef>

  <AbilityDef>
    <defName>CallMechanoids</defName>
    <label>call mechanoids</label>
    <description>Summon hostile mechanoids to a location using drop pods. They will attack all nearby humans - friend or foe.</description>
    <iconPath>UI/Commands/CallMechanoids</iconPath>
    <cooldownTicksRange>7500</cooldownTicksRange> <!-- 3 hours -->
    <displayOrder>300</displayOrder>
    <casterMustBeCapableOfViolence>false</casterMustBeCapableOfViolence>
    <verbProperties>
      <verbClass>Verb_CastAbility</verbClass>
      <range>500</range>
      <warmupTime>0.5</warmupTime>
      <soundCast>Ability_CallMechanoids</soundCast>
      <useableInPocketMaps>false</useableInPocketMaps>
      <targetParams>
        <canTargetLocations>true</canTargetLocations>
      </targetParams>
    </verbProperties>
    <comps>
      <li Class="CompProperties_DropMechs">
        <points>750~1250</points>
      </li>
    </comps>
  </AbilityDef>

  <AbilityDef>
    <defName>CallDropPods</defName>
    <label>call drop pods</label>
    <description>Summon drop pods that you can use to travel to another location.</description>
    <iconPath>UI/Commands/CallDropPods</iconPath>
    <cooldownTicksRange>180000</cooldownTicksRange> <!-- 3 days -->
    <displayOrder>300</displayOrder>
    <casterMustBeCapableOfViolence>false</casterMustBeCapableOfViolence>
    <verbProperties>
      <verbClass>Verb_CastAbility</verbClass>
      <range>500</range>
      <warmupTime>0.5</warmupTime>
      <soundCast>Ability_CallMechanoids</soundCast>
      <useableInPocketMaps>false</useableInPocketMaps>
      <targetParams>
        <canTargetLocations>true</canTargetLocations>
      </targetParams>
    </verbProperties>
    <comps>
      <li Class="CompProperties_DropMechPods">
        <numPods>2~3</numPods>
      </li>
    </comps>
  </AbilityDef>

  <AbilityDef>
    <defName>DeactivateMechanoid</defName>
    <label>deactivate mechanoid</label>
    <description>Permanently disable a hostile mechanoid.</description>
    <iconPath>UI/Commands/DeactivateMechanoid</iconPath>
    <cooldownTicksRange>7500</cooldownTicksRange> <!-- 3 hours -->
    <displayOrder>300</displayOrder>
    <casterMustBeCapableOfViolence>false</casterMustBeCapableOfViolence>
    <verbProperties>
      <verbClass>Verb_CastAbility</verbClass>
      <range>29.9</range>
      <warmupTime>0.5</warmupTime>
      <soundCast>Ability_CallMechanoids</soundCast>
      <targetParams>
        <canTargetBuildings>false</canTargetBuildings>
        <canTargetAnimals>false</canTargetAnimals>
        <canTargetHumans>false</canTargetHumans>
        <canTargetSubhumans>false</canTargetSubhumans>
        <canTargetMechs>true</canTargetMechs>
      </targetParams>
    </verbProperties>
    <comps>
      <li Class="CompProperties_DeactivateMechanoid" />
    </comps>
  </AbilityDef>

  <AbilityDef>
    <defName>TerrorRoar</defName>
    <label>terror roar</label>
    <description>Release a terrifying roar which has a chance to send nearby hostile humans and animals fleeing in terror.</description>
    <iconPath>UI/Commands/TerrorRoar</iconPath>
    <cooldownTicksRange>7500</cooldownTicksRange> <!-- 3 hours -->
    <stunTargetWhileCasting>true</stunTargetWhileCasting>
    <targetRequired>false</targetRequired>
    <aiCanUse>true</aiCanUse>
    <ai_SearchAOEForTargets>true</ai_SearchAOEForTargets>
    <displayOrder>300</displayOrder>
    <displayGizmoWhileUndrafted>true</displayGizmoWhileUndrafted>
    <disableGizmoWhileUndrafted>false</disableGizmoWhileUndrafted>
    <statBases>
      <Ability_EffectRadius>23.9</Ability_EffectRadius>
    </statBases>
    <verbProperties>
      <verbClass>Verb_CastAbility</verbClass>
      <range>23.9</range>
      <warmupTime>0.5</warmupTime>
      <requireLineOfSight>false</requireLineOfSight>
      <soundCast>Ability_TerrorRoar</soundCast>
      <targetParams>
        <canTargetSelf>true</canTargetSelf>
        <canTargetPawns>true</canTargetPawns>
        <canTargetAnimals>true</canTargetAnimals>
        <canTargetHumans>true</canTargetHumans>
        <canTargetMechs>false</canTargetMechs>
        <canTargetEntities>False</canTargetEntities>
        <canTargetSubhumans>False</canTargetSubhumans>
        <canTargetBuildings>false</canTargetBuildings>
      </targetParams>
    </verbProperties>
    <comps>
      <li Class="CompProperties_AbilityGiveMentalState">
        <compClass>CompAbilityEffect_GiveMentalState</compClass>
        <stateDef>Terror</stateDef>
      </li>
      <li Class="CompProperties_AbilityEffect">
        <compClass>CompAbilityEffect_OnlyTargetHostiles</compClass>
      </li>
      <li Class="CompProperties_AbilityAnimalRoar">
        <chanceFromHearingCurve>
          <points>
            <li>(0.0, 0.0)</li>
            <li>(1.0, 0.75)</li>
          </points>
        </chanceFromHearingCurve>
      </li>
      <li Class="CompProperties_AbilityEffecterOnCaster">
        <effecterDef>TerrorRoar</effecterDef>
        <maintainTicks>20</maintainTicks> <!-- Long enough for the "2nd wave" to spawn -->
      </li>
    </comps>
  </AbilityDef>

  <AbilityDef Name="AnimalRoarBase" Abstract="True">
    <description>Release a powerful roar which has a chance to cause hostile humans and animals to tremble in fear, reducing their movement speed and manipulation.</description>
    <iconPath>UI/Commands/WarTrumpet</iconPath>
    <cooldownTicksRange>7500</cooldownTicksRange> <!-- 3 hours -->
    <stunTargetWhileCasting>True</stunTargetWhileCasting>
    <targetRequired>false</targetRequired>
    <displayOrder>300</displayOrder>
    <displayGizmoWhileUndrafted>true</displayGizmoWhileUndrafted>
    <disableGizmoWhileUndrafted>false</disableGizmoWhileUndrafted>
    <verbProperties>
      <verbClass>Verb_CastAbility</verbClass>
      <range>23.9</range>
      <warmupTime>0.5</warmupTime>
      <requireLineOfSight>false</requireLineOfSight>
      <targetParams>
        <canTargetSelf>true</canTargetSelf>
        <canTargetPawns>true</canTargetPawns>
        <canTargetAnimals>true</canTargetAnimals>
        <canTargetHumans>true</canTargetHumans>
        <canTargetEntities>False</canTargetEntities>
        <canTargetSubhumans>False</canTargetSubhumans>
        <canTargetMechs>false</canTargetMechs>
        <canTargetBuildings>false</canTargetBuildings>
      </targetParams>
    </verbProperties>
    <comps>
      <li Class="CompProperties_AbilityEffect">
        <compClass>CompAbilityEffect_OnlyTargetHostiles</compClass>
      </li>
      <li Class="CompProperties_AbilityAnimalRoar">
        <chanceFromHearingCurve>
          <points>
            <li>(0.0, 0.0)</li>
            <li>(0.8, 1.0)</li>
          </points>
        </chanceFromHearingCurve>
      </li>
      <li Class="CompProperties_AbilityEffecterOnCaster">
        <effecterDef>WarTrumpet</effecterDef>
        <maintainTicks>20</maintainTicks> <!-- Long enough for the "2nd wave" to spawn -->
      </li>
    </comps>
  </AbilityDef>
  
  <AbilityDef ParentName="AnimalRoarBase">
    <defName>WarTrumpet</defName>
    <label>war trumpet</label>
    <statBases>
      <Ability_EffectRadius>19.9</Ability_EffectRadius>
    </statBases>
    <comps>
      <li Class="CompProperties_AbilityGiveHediff">
        <compClass>CompAbilityEffect_GiveHediff</compClass>
        <hediffDef>WarTrumpet</hediffDef>
        <durationSecondsOverride>20~30</durationSecondsOverride>
      </li>
    </comps>
  </AbilityDef>


  <AbilityDef ParentName="AnimalRoarBase">
    <defName>ThrumboRoar</defName>
    <label>thrumbo roar</label>
    <statBases>
      <Ability_EffectRadius>23.9</Ability_EffectRadius>
    </statBases>
    <comps>
      <li Class="CompProperties_AbilityGiveHediff">
        <compClass>CompAbilityEffect_GiveHediff</compClass>
        <hediffDef>ThrumboRoar</hediffDef>
        <durationSecondsOverride>20~30</durationSecondsOverride>
      </li>
    </comps>
  </AbilityDef>

</Defs>