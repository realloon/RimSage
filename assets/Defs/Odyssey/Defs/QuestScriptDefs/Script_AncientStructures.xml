<?xml version="1.0" encoding="utf-8"?>
<Defs>
  <QuestScriptDef>
    <defName>Util_SetupAncientStructureCommon</defName>
    <root Class="QuestNode_Sequence">
      <nodes>
        <li Class="QuestNode_SubScript">
          <def>Util_AdjustPointsForDistantFight</def>
        </li>

        <li Class="QuestNode_GetMap">
          <canBeSpace>true</canBeSpace>
        </li>
        
        <li Class="QuestNode_Set">
          <name>siteDistRange</name>
          <value>20~60</value>
        </li>
        
        <li Class="QuestNode_GetSiteTile">
          <storeAs>siteTile</storeAs>
          <preferCloserTiles>true</preferCloserTiles>
          <selectLandmarkChance>0.5</selectLandmarkChance>
          <canSelectComboLandmarks>false</canSelectComboLandmarks>
          <allowedLandmarks>
            <li>Oasis</li>
            <li>Lake</li>
            <li>LakeWithIsland</li>
            <li>LakeWithIslands</li>
            <li>Pond</li>
            <li>DryLake</li>
            <li>ToxicLake</li>
            <li>Wetland</li>
            <li>HotSprings</li>
            <li>Archipelago</li>
            <li>CoastalIsland</li>
            <li>Peninsula</li>
            <li>Bay</li>
            <li>Valley</li>
            <li>Cavern</li>
            <li>Chasm</li>
            <li>Cliffs</li>
            <li>Hollow</li>
            <li>TerraformingScar</li>
            <li>LavaLake</li>
            <li>Dunes</li>
            <li>AncientHeatVent</li>
          </allowedLandmarks>
        </li>
      </nodes>
    </root>
  </QuestScriptDef>
  
  <QuestScriptDef Abstract="True" Name="Script_AncientStructuresBase">
    <isRootSpecial>true</isRootSpecial>
    <randomlySelectable>false</randomlySelectable>
    <givenBy>
      <li>Traders</li>
      <li>Beggars</li>
      <li>Reading</li>
    </givenBy>
    <defaultChallengeRating>1</defaultChallengeRating>
    <rootSelectionWeight>0.2</rootSelectionWeight>
    <autoAccept>true</autoAccept>
    <questNameRules>
      <rulesStrings>
        <li>questName->The [ancient] [structureName]</li>
        <li>questName->[ancient] [structureName]</li>
        <li>questName->Discovered [structureName]</li>
        <li>questName->[structureName] Discovery</li>
        
        <li>ancient(p=2)->Ancient</li>
        <li>ancient->Lost</li>
      </rulesStrings>
    </questNameRules>
    <questDescriptionRules>
      <rulesStrings>
        <li>questDescription->[discoveryMethod] the location of [structureNameWithArticle]. You can loot the structure for valuable resources.\n\nBe warned, ancient structures can contain a variety of threats.</li>
      </rulesStrings>
    </questDescriptionRules>
    <questSubjectRules>
      <rulesStrings>
        <li>subject->ancient buildings</li>
        <li>subject->lost landmarks</li>
        <li>subject->ancient structures</li>

        <li>questMapFeature->drawing of an old building</li>

        <li>questMapText->scavenging target</li>
        <li>questMapText->exploration site</li>
        <li>questMapText->dangerous ancient structure</li>
        <li>questMapText->beware of traps</li>
      </rulesStrings>
    </questSubjectRules>
  </QuestScriptDef>
  
  <QuestScriptDef ParentName="Script_AncientStructuresBase">
    <defName>Opportunity_AncientStructureLaunchSite</defName>
    <questNameRules>
      <rulesStrings>
        <li>structureName->launch site</li>
      </rulesStrings>
    </questNameRules>
    <questDescriptionRules>
      <rulesStrings>
        <li>structureNameWithArticle->an ancient launch site</li>
      </rulesStrings>
    </questDescriptionRules>
    <questSubjectRules>
      <rulesStrings>
        <li>subject->ancient launch sites</li>
        <li>subject->spaceports</li>

        <li>questMapFeature->launch site</li>
        <li>questMapFeature->diagram of shuttle refueling apparatus</li>
        <li>questMapFeature->sketch of treasure being loaded into transport pods</li>

        <li>questMapText->they have fuel</li>
      </rulesStrings>
    </questSubjectRules>
    <root Class="QuestNode_Sequence">
      <nodes>
        <li Class="QuestNode_SubScript">
          <def>Util_SetupAncientStructureCommon</def>
        </li>
        <li Class="QuestNode_Root_AncientStructure">
          <structureMutator>AncientLaunchSite</structureMutator>
          <sitePartDef>OpportunitySite_AncientLaunchSite</sitePartDef>
        </li>
      </nodes>
    </root>
  </QuestScriptDef>

  <QuestScriptDef ParentName="Script_AncientStructuresBase">
    <defName>Opportunity_AncientStructureGarrison</defName>
    <questNameRules>
      <rulesStrings>
        <li>structureName->garrison</li>
      </rulesStrings>
    </questNameRules>
    <questDescriptionRules>
      <rulesStrings>
        <li>structureNameWithArticle->an ancient garrison</li>
      </rulesStrings>
    </questDescriptionRules>
    <questSubjectRules>
      <rulesStrings>
        <li>subject->ancient military sites</li>
        <li>subject->ancient garrisons</li>

        <li>questMapFeature->garrison</li>
        <li>questMapFeature->picture of weapon racks</li>
        <li>questMapFeature->charcoal sketch of an assault rifle</li>

        <li>questMapText->weapons facility</li>
        <li>questMapText->ancient armory</li>
        <li>questMapText->lots of military equipment</li>
      </rulesStrings>
    </questSubjectRules>
    <root Class="QuestNode_Sequence">
      <nodes>
        <li Class="QuestNode_SubScript">
          <def>Util_SetupAncientStructureCommon</def>
        </li>
        <li Class="QuestNode_Root_AncientStructure">
          <structureMutator>AncientGarrison</structureMutator>
          <sitePartDef>OpportunitySite_AncientGarrison</sitePartDef>
        </li>
      </nodes>
    </root>
  </QuestScriptDef>

  <QuestScriptDef ParentName="Script_AncientStructuresBase">
    <defName>Opportunity_AncientStructureChemfuelRefinery</defName>
    <questNameRules>
      <rulesStrings>
        <li>structureName->chemfuel refinery</li>
      </rulesStrings>
    </questNameRules>
    <questDescriptionRules>
      <rulesStrings>
        <li>structureNameWithArticle->an ancient chemfuel refinery</li>
      </rulesStrings>
    </questDescriptionRules>
    <questSubjectRules>
      <rulesStrings>
        <li>subject->ancient refineries</li>
        <li>subject->chemplants</li>

        <li>questMapFeature->chemfuel refinery</li>
        <li>questMapFeature->picture of a chemfuel tank</li>
        <li>questMapFeature->sketch of refinery equipment</li>

        <li>questMapText->chemfuel depot</li>
        <li>questMapText->chemfuel here</li>
      </rulesStrings>
    </questSubjectRules>
    <root Class="QuestNode_Sequence">
      <nodes>
        <li Class="QuestNode_SubScript">
          <def>Util_SetupAncientStructureCommon</def>
        </li>
        <li Class="QuestNode_Root_AncientStructure">
          <structureMutator>AncientChemfuelRefinery</structureMutator>
          <sitePartDef>OpportunitySite_AncientChemfuelRefinery</sitePartDef>
        </li>
      </nodes>
    </root>
  </QuestScriptDef>

  <QuestScriptDef ParentName="Script_AncientStructuresBase">
    <defName>Opportunity_AncientStructureWarehouse</defName>
    <questNameRules>
      <rulesStrings>
        <li>structureName->warehouse</li>
      </rulesStrings>
    </questNameRules>
    <questDescriptionRules>
      <rulesStrings>
        <li>structureNameWithArticle->an ancient warehouse</li>
      </rulesStrings>
    </questDescriptionRules>
    <questSubjectRules>
      <rulesStrings>
        <li>subject->ancient storehouses</li>
        <li>subject->warehouses</li>

        <li>questMapFeature->warehouse</li>
        <li>questMapFeature->diagram of shelves filled with boxes</li>
        <li>questMapFeature->sketch of a forklift</li>

        <li>questMapText->massive ancient building</li>
      </rulesStrings>
    </questSubjectRules>
    <root Class="QuestNode_Sequence">
      <nodes>
        <li Class="QuestNode_SubScript">
          <def>Util_SetupAncientStructureCommon</def>
        </li>
        <li Class="QuestNode_Root_AncientStructure">
          <structureMutator>AncientWarehouse</structureMutator>
          <sitePartDef>OpportunitySite_AncientWarehouse</sitePartDef>
        </li>
      </nodes>
    </root>
  </QuestScriptDef>
  
  <QuestScriptDef ParentName="Script_AncientStructuresBase">
    <defName>Opportunity_AncientInfestedSettlement</defName>
    <questNameRules>
      <rulesStrings>
        <li>structureName->infested settlement</li>
      </rulesStrings>
    </questNameRules>
    <questDescriptionRules>
      <rulesStrings>
        <li>structureNameWithArticle->an infested settlement</li>
      </rulesStrings>
    </questDescriptionRules>
    <questSubjectRules>
      <rulesStrings>
        <li>subject->insect hives</li>
        <li>subject->infestations</li>

        <li>questMapFeature->insect hive</li>
        <li>questMapFeature->anatomical drawing of a megaspider</li>

        <li>questMapText->insects everywhere</li>
      </rulesStrings>
    </questSubjectRules>
    <root Class="QuestNode_Sequence">
      <nodes>
        <li Class="QuestNode_SubScript">
          <def>Util_SetupAncientStructureCommon</def>
        </li>
        <li Class="QuestNode_Root_AncientStructure">
          <structureMutator>AncientInfestedSettlement</structureMutator>
          <sitePartDef>OpportunitySite_AncientInfestedSettlement</sitePartDef>
        </li>
      </nodes>
    </root>
  </QuestScriptDef>
</Defs>