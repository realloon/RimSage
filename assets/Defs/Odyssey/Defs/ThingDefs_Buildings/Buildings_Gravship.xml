<?xml version="1.0" encoding="utf-8" ?>
<Defs>

  <GravshipComponentTypeDef>
    <defName>Thruster</defName>
    <label>thruster</label>
  </GravshipComponentTypeDef>

  <GravshipComponentTypeDef>
    <defName>FuelStorage</defName>
    <label>fuel tank</label>
  </GravshipComponentTypeDef>

  <GravshipComponentTypeDef>
    <defName>Controls</defName>
    <label>controls</label>
  </GravshipComponentTypeDef>
  
  <GravshipComponentTypeDef>
    <defName>SignalJammer</defName>
    <label>signal jammer</label> 
    <requiredForLaunch>false</requiredForLaunch>
  </GravshipComponentTypeDef>

  <GravshipComponentTypeDef>
    <defName>PowerCell</defName>
    <label>power cell</label> 
    <requiredForLaunch>false</requiredForLaunch>
  </GravshipComponentTypeDef>

  <ThingDef ParentName="Wall">
    <defName>GravshipHull</defName>
    <label>gravship hull</label>
    <description>A strong airtight wall that prevents oxygen leaks in the vacuum of space. The wall connects directly into the underlying substructure, meaning it can only be built on a gravship.</description>
    <designationCategory>Odyssey</designationCategory>
    <uiOrder>1800</uiOrder>
    <uiIconPath>Things/Building/Linked/GravshipHull/GravshipHull_MenuIcon</uiIconPath>
    <graphicData>
      <texPath>Things/Building/Linked/GravshipHull/GravshipHull_Atlas</texPath>
      <graphicClass>Graphic_Single</graphicClass>
    </graphicData>
    <researchPrerequisites>
      <li>BasicGravtech</li>
    </researchPrerequisites>
    <statBases>
      <MaxHitPoints>420</MaxHitPoints>
      <WorkToBuild>300</WorkToBuild>
      <Flammability>0</Flammability>
    </statBases>
    <costStuffCount>7</costStuffCount>
    <building>
      <isAirtight>true</isAirtight>
    </building>
    <terrainAffordanceNeeded>Substructure</terrainAffordanceNeeded>
    <useStuffTerrainAffordance>false</useStuffTerrainAffordance>
    <stuffCategories Inherit="False">
      <li>Metallic</li>
    </stuffCategories>
    <comps Inherit="False"/>
  </ThingDef>

  <ThingDef ParentName="ShipChunkBase">
    <label>mechanoid ship chunk</label>
    <description>A chunk of mechanoid spacecraft made of steel and gravlite panels. It seems to have been torn off either by uncontrolled re-entry forces or some kind of weapon.\n\nDeconstruct it to obtain valuable resources.</description>
    <defName>ShipChunk_Mech</defName>
    <graphicData>
      <texPath>Things/Building/MechanoidShipChunk</texPath>
      <graphicClass>Graphic_Random</graphicClass>
    </graphicData>
    <resourcesFractionWhenDeconstructed>1</resourcesFractionWhenDeconstructed>
    <costList Inherit="False">
      <Steel>40</Steel>
      <GravlitePanel>15</GravlitePanel>
    </costList>
    <killedLeavings Inherit="False">
      <ChunkSlagSteel>2</ChunkSlagSteel>
      <GravlitePanel>15</GravlitePanel>
    </killedLeavings>
  </ThingDef>
  
  <ThingDef ParentName="BuildingBase" Name="GravshipComponentBase" Abstract="True">
    <statBases>
      <Flammability>0</Flammability>
      <Beauty>-10</Beauty>
    </statBases>
    <terrainAffordanceNeeded>Heavy</terrainAffordanceNeeded>
    <genericMarketSellable>false</genericMarketSellable>
    <altitudeLayer>Building</altitudeLayer>
    <rotatable>false</rotatable>
    <blockWind>true</blockWind>
    <thingCategories>
      <li>BuildingsMisc</li>
    </thingCategories>
    <minifiedDef>MinifiedThing</minifiedDef>
  </ThingDef>

  <!-- For fast searching the map for minified grav engines -->
  <ThingDef ParentName="MinifiedThing">
    <defName>MinifiedGravEngine</defName>
  </ThingDef>

  <ThingDef ParentName="GravshipComponentBase">
    <defName>GravEngine</defName>
    <label>grav engine</label>
    <description>The ultratech heart of a gravship. The grav engine generates lift by inverting and intensifying the effect of gravity in a field around itself. This engine can lift upwards, but does not produce forward thrust. It can't function far from a large gravity well like a planet, so it is useless for interplanetary travel.\n\nWhen launched, anything on substructure that's connected to the grav engine will be transported to a new map. Without a grav anchor, launching a gravship will abandon your current map.\n\nGlitterworld engineers use gravships to launch orbital platforms and build skyrippers. They require massive and hyper-specialized facilities to produce, making them a rare sight outside of glitterworlds.</description>
    <thingClass>Building_GravEngine</thingClass>
    <drawerType>RealtimeOnly</drawerType>
    <tickerType>Normal</tickerType>
    <minifiedDef>MinifiedGravEngine</minifiedDef>
    <graphicData>
      <graphicClass>Graphic_Single</graphicClass>
      <texPath>Things/Building/GravEngine/GravEngine</texPath>
      <drawSize>(3,3)</drawSize>
    </graphicData>
    <statBases>
      <MaxHitPoints>800</MaxHitPoints>
      <Mass>30</Mass>
      <GravshipRange>0</GravshipRange>
      <SubstructureSupport>500</SubstructureSupport>
      <MarketValue>2000</MarketValue>
    </statBases>
    <size>(3,3)</size>
    <castEdgeShadows>true</castEdgeShadows>
    <fillPercent>0.6</fillPercent>
    <passability>PassThroughOnly</passability>
    <pathCost>20</pathCost>
    <canOverlapZones>false</canOverlapZones>
    <building>
      <ai_neverTrashThis>true</ai_neverTrashThis>
      <deconstructible>false</deconstructible>
      <relatedBuildCommands>
        <li>GravshipHull</li>
      </relatedBuildCommands>
      <relatedTerrain>
        <li>Substructure</li>
      </relatedTerrain>
    </building>
    <comps>
      <li Class="CompProperties_SubstructureFootprint">
        <radius>18.9</radius>
      </li>
      <li Class="CompProperties_Glower">
        <glowRadius>8</glowRadius>
        <glowColor>(0,218,255,0)</glowColor>
      </li>
      <li Class="CompProperties_AffectedByFacilities">
        <linkableFacilities>
          <li>GravFieldExtender</li>
          <li>PilotConsole</li>
          <li>ChemfuelTank</li>
          <li>LargeChemfuelTank</li>
          <li>SmallThruster</li>
          <li>LargeThruster</li>
          <li>FuelOptimizer</li>
          <li>SignalJammer</li>
          <li>PilotSubpersonaCore</li>
          <li>GravshipShieldGenerator</li>
        </linkableFacilities>
      </li>
      <li Class="CompProperties_AmbientSound">
        <sound>GravshipEngine_Ambient</sound>
      </li>
    </comps>
  </ThingDef>
  
  <ThingDef ParentName="GravshipComponentBase">
    <defName>GravFieldExtender</defName>
    <label>grav field extender</label>
    <description>An ultratech device used to increase the size of a gravship. It extends the area in which substructure can be built, and increases the amount of substructure that a gravship can support. Must be built near a grav engine.\n\nA gravship can support up to six grav field extenders.</description> 
    <graphicData>
      <graphicClass>Graphic_Single</graphicClass>
      <texPath>Things/Building/GravFieldExtender</texPath>
    </graphicData>
    <statBases>
      <MaxHitPoints>200</MaxHitPoints>
      <Mass>15</Mass>
      <WorkToBuild>1500</WorkToBuild>
    </statBases>
    <fillPercent>0.4</fillPercent>
    <passability>PassThroughOnly</passability>
    <pathCost>14</pathCost>
    <canOverlapZones>false</canOverlapZones>
    <designationCategory>Odyssey</designationCategory>
    <constructionSkillPrerequisite>4</constructionSkillPrerequisite>
    <resourcesFractionWhenDeconstructed>1</resourcesFractionWhenDeconstructed>
    <researchPrerequisites>
      <li>BasicGravtech</li>
    </researchPrerequisites>
    <costList>
      <Gravcore>1</Gravcore>
      <GravlitePanel>35</GravlitePanel>
      <ComponentIndustrial>2</ComponentIndustrial>
      <Steel>80</Steel>
    </costList>
    <terrainAffordanceNeeded>Substructure</terrainAffordanceNeeded>
    <placeWorkers>
      <li>PlaceWorker_InRangeOfGravEngine</li>
    </placeWorkers>
    <building>
      <relatedTerrain>
        <li>Substructure</li>
      </relatedTerrain>
    </building>
    <comps>
      <li Class="CompProperties_SubstructureFootprint">
        <radius>16.9</radius>
      </li>
      <li Class="CompProperties_Glower">
        <glowRadius>2</glowRadius>
        <glowColor>(0,218,255,0)</glowColor>
      </li>
      <li Class="CompProperties_GravshipFacility">
        <statOffsets>
          <SubstructureSupport>250</SubstructureSupport>
        </statOffsets>
        <requiresLOS>false</requiresLOS>
        <maxSimultaneous>6</maxSimultaneous>
        <maxDistance>18.9</maxDistance>
        <onlyRequiresLooseConnection>true</onlyRequiresLooseConnection> <!-- Extends the support so may support itself -->
      </li>
    </comps>
    <uiOrder>2300</uiOrder>
  </ThingDef>
  
  <ThingDef ParentName="GravshipComponentBase">
    <defName>PilotConsole</defName>
    <label>pilot console</label>
    <description>An interface that allows launching and piloting a gravship. It draws power directly from the grav engine.</description>
    <graphicData>
      <graphicClass>Graphic_Multi</graphicClass>
      <texPath>Things/Building/PilotConsole/PilotConsole</texPath>
      <drawSize>(3.7, 2.6)</drawSize>
    </graphicData>
    <statBases>
      <MaxHitPoints>150</MaxHitPoints>
      <Mass>50</Mass>
      <Flammability>0</Flammability>
      <Beauty>0</Beauty>
      <WorkToBuild>2500</WorkToBuild>
    </statBases>
    <size>(3, 2)</size>
    <rotatable>true</rotatable>
    <fillPercent>0.4</fillPercent>
    <passability>PassThroughOnly</passability>
    <pathCost>14</pathCost>
    <canOverlapZones>false</canOverlapZones>
    <costList>
      <Steel>140</Steel>
      <ComponentIndustrial>3</ComponentIndustrial>
    </costList>
    <resourcesFractionWhenDeconstructed>1</resourcesFractionWhenDeconstructed>
    <constructionSkillPrerequisite>4</constructionSkillPrerequisite>
    <designationCategory>Odyssey</designationCategory>
    <hasInteractionCell>true</hasInteractionCell>
    <interactionCellOffset>(0, 0,-1)</interactionCellOffset>
    <researchPrerequisites>
      <li>BasicGravtech</li>
    </researchPrerequisites>
    <terrainAffordanceNeeded>Substructure</terrainAffordanceNeeded>
    <comps>
      <li Class="CompProperties_GravshipFacility">
        <compClass>CompPilotConsole</compClass>
        <componentTypeDef>Controls</componentTypeDef>
        <requiresLOS>false</requiresLOS>
        <showMaxSimultaneous>false</showMaxSimultaneous>
        <maxSimultaneous>1</maxSimultaneous>
        <maxDistance>200</maxDistance>
      </li>
      <li Class="CompProperties_Breakdownable" />
    </comps>
    <uiOrder>2100</uiOrder>
  </ThingDef>
  
  <ThingDef Name="FuelTankBase" ParentName="GravshipComponentBase" Abstract="True">
    <fillPercent>0.6</fillPercent>
    <passability>PassThroughOnly</passability>
    <pathCost>20</pathCost>
    <canOverlapZones>false</canOverlapZones>
    <designationCategory>Odyssey</designationCategory>
    <tickerType>Normal</tickerType>
    <drawerType>MapMeshAndRealTime</drawerType>
    <terrainAffordanceNeeded>Substructure</terrainAffordanceNeeded>
    <minifiedDef IsNull="True"/>
    <thingCategories IsNull="True"/>
    <comps>
      <li Class="CompProperties_GravshipFacility">
        <providesFuel>true</providesFuel>
        <componentTypeDef>FuelStorage</componentTypeDef>
        <requiresLOS>false</requiresLOS>
        <showMaxSimultaneous>false</showMaxSimultaneous>
        <maxSimultaneous>9999</maxSimultaneous>
        <maxDistance>500</maxDistance>
      </li>
      <li Class="CompProperties_Explosive">
        <explosiveRadius>0</explosiveRadius>
        <explosiveExpandPerFuel>0.06</explosiveExpandPerFuel>
        <explosiveDamageType>Flame</explosiveDamageType>
        <destroyThingOnExplosionSize>2</destroyThingOnExplosionSize>
        <startWickHitPointsPercent>0.333</startWickHitPointsPercent>
        <preExplosionSpawnThingDef>Filth_Fuel</preExplosionSpawnThingDef>
        <preExplosionSpawnChance>1</preExplosionSpawnChance>
        <wickTicks>70~150</wickTicks>
      </li>
    </comps>
    <uiOrder>2150</uiOrder>
  </ThingDef>
  
  <ThingDef ParentName="FuelTankBase">
    <defName>ChemfuelTank</defName>
    <label>small chemfuel tank</label>
    <description>A chemfuel storage tank that supplies fuel for thrusters on a gravship.</description>
    <graphicData>
      <graphicClass>Graphic_Multi</graphicClass>
      <texPath>Things/Building/ChemfuelTank/ChemfuelTank</texPath>
      <drawSize>(2, 2)</drawSize>
    </graphicData>
    <statBases>
      <MaxHitPoints>200</MaxHitPoints>
      <Mass>30</Mass>
      <Flammability>1</Flammability>
      <Beauty>-10</Beauty>
      <WorkToBuild>2000</WorkToBuild>
    </statBases>
    <size>(2, 2)</size>
    <costList>
      <Steel>120</Steel>
    </costList>
    <researchPrerequisites>
      <li>BasicGravtech</li>
    </researchPrerequisites>
    <comps>
      <li Class="CompProperties_Refuelable">
        <fuelCapacity>250</fuelCapacity>
        <targetFuelLevelConfigurable>true</targetFuelLevelConfigurable>
        <initialConfigurableTargetFuelLevel>250</initialConfigurableTargetFuelLevel>
        <fuelFilter>
          <thingDefs>
            <li>Chemfuel</li>
          </thingDefs>
        </fuelFilter>
        <fuelLabel>Chemfuel</fuelLabel>
        <fuelGizmoLabel>Chemfuel</fuelGizmoLabel>
        <consumeFuelOnlyWhenUsed>true</consumeFuelOnlyWhenUsed>
        <autoRefuelPercent>1</autoRefuelPercent>
        <showFuelGizmo>true</showFuelGizmo>
        <drawOutOfFuelOverlay>false</drawOutOfFuelOverlay>
        <showAllowAutoRefuelToggle>true</showAllowAutoRefuelToggle>
        <canEjectFuel>true</canEjectFuel>
        <drawFuelGaugeInMap>false</drawFuelGaugeInMap>
      </li>
    </comps>
  </ThingDef>

  <ThingDef ParentName="FuelTankBase">
    <defName>LargeChemfuelTank</defName>
    <label>large chemfuel tank</label>
    <description>A massive chemfuel storage tank that supplies fuel for thrusters on a gravship.</description>
    <graphicData>
      <graphicClass>Graphic_Multi</graphicClass>
      <texPath>Things/Building/LargeChemfuelTank/LargeChemfuelTank</texPath>
      <drawSize>(3, 3)</drawSize>
    </graphicData>
    <statBases>
      <MaxHitPoints>300</MaxHitPoints>
      <Mass>70</Mass>
      <Flammability>1</Flammability>
      <Beauty>-10</Beauty>
      <WorkToBuild>3000</WorkToBuild>
    </statBases>
    <size>(3, 3)</size>
    <costList>
      <Steel>200</Steel>
    </costList>
    <researchPrerequisites>
      <li>StandardGravtech</li>
    </researchPrerequisites>
    <comps>
      <li Class="CompProperties_Refuelable">
        <fuelCapacity>750</fuelCapacity>
        <targetFuelLevelConfigurable>true</targetFuelLevelConfigurable>
        <initialConfigurableTargetFuelLevel>750</initialConfigurableTargetFuelLevel>
        <fuelFilter>
          <thingDefs>
            <li>Chemfuel</li>
          </thingDefs>
        </fuelFilter>
        <fuelLabel>Chemfuel</fuelLabel>
        <fuelGizmoLabel>Chemfuel</fuelGizmoLabel>
        <consumeFuelOnlyWhenUsed>true</consumeFuelOnlyWhenUsed>
        <autoRefuelPercent>1</autoRefuelPercent>
        <showFuelGizmo>true</showFuelGizmo>
        <drawOutOfFuelOverlay>false</drawOutOfFuelOverlay>
        <showAllowAutoRefuelToggle>true</showAllowAutoRefuelToggle>
        <canEjectFuel>true</canEjectFuel>
        <drawFuelGaugeInMap>false</drawFuelGaugeInMap>
      </li>
    </comps>
    <uiOrder>2155</uiOrder>
  </ThingDef>
  
  <ThingDef Name="ThrusterBase" ParentName="GravshipComponentBase" Abstract="True">
    <rotatable>true</rotatable>
    <tickerType>Rare</tickerType>
    <passability>Impassable</passability>
    <blockWind>true</blockWind>
    <fillPercent>1</fillPercent>
    <holdsRoof>true</holdsRoof>
    <canOverlapZones>false</canOverlapZones>
    <designationCategory>Odyssey</designationCategory>
    <blockLight>true</blockLight>
    <placeWorkers>
      <li>PlaceWorker_GravshipThruster</li>
    </placeWorkers>
    <terrainAffordanceNeeded>Substructure</terrainAffordanceNeeded>
    <drawPlaceWorkersWhileSelected>true</drawPlaceWorkersWhileSelected>
    <drawPlaceWorkersWhileInstallBlueprintSelected>true</drawPlaceWorkersWhileInstallBlueprintSelected>
    <building>
      <isAirtight>true</isAirtight>
      <isInert>true</isInert>
    </building>
    <uiOrder>2200</uiOrder>
  </ThingDef>

  <ThingDef ParentName="ThrusterBase">
    <defName>SmallThruster</defName>
    <label>small thruster</label>
    <description>A chemfuel thruster that increases the range of a gravship. Thrusters require an unobstructed area free of large buildings and gravship substructure.\n\nA gravship can support up to four small thrusters.</description>
    <graphicData>
      <graphicClass>Graphic_Multi</graphicClass>
      <texPath>Things/Building/SmallThruster/SmallThruster</texPath>
      <drawSize>(1.1, 2.2)</drawSize>
      <shadowData>
        <volume>(1, 1, 2)</volume>
      </shadowData>
    </graphicData>
    <statBases>
      <MaxHitPoints>250</MaxHitPoints>
      <Flammability>0</Flammability>
      <Beauty>-10</Beauty>
      <WorkToBuild>10000</WorkToBuild>
      <Mass>20</Mass>
    </statBases>
    <size>(1, 2)</size>
    <constructionSkillPrerequisite>4</constructionSkillPrerequisite>
    <costList>
      <Steel>180</Steel>
      <ComponentIndustrial>4</ComponentIndustrial>
    </costList>
    <researchPrerequisites>
      <li>BasicGravtech</li>
    </researchPrerequisites>
    <comps>
      <li Class="CompProperties_GravshipThruster">
        <statOffsets>
          <GravshipRange>10</GravshipRange>
        </statOffsets>
        <componentTypeDef>Thruster</componentTypeDef>
        <exclusionAreaSize>(1, 0, 5)</exclusionAreaSize>
        <exclusionAreaOffset>(0, 0, -5)</exclusionAreaOffset>
        <directionInfluence>20</directionInfluence>
        <flameSize>4.0</flameSize>
        <flameOffsetsPerDirection>
          <li>(0, 0, 0.5)</li>
          <li>(0, 0, 0.5)</li>
          <li>(0, 0, 0.5)</li>
          <li>(0, 0, 0.5)</li>
        </flameOffsetsPerDirection>
        <flameShaderType>MoteGlow</flameShaderType>
        <flameShaderParameters>
          <_MainTex>/Things/Mote/SmallThruster_Burn</_MainTex>
        </flameShaderParameters>
        <requiresLOS>false</requiresLOS>
        <maxSimultaneous>4</maxSimultaneous>
        <maxDistance>500</maxDistance>
        <exhaustSettings>
          <exhaustFleckDef>GravshipThrusterExhaust</exhaustFleckDef>
          <emissionsPerSecond>40.0</emissionsPerSecond>
          <spawnRadiusRange>0.0~0.5</spawnRadiusRange>
          <velocity>(0.0,0.0,-20.0)</velocity>
          <velocityRotationRange>-10.0~10.0</velocityRotationRange>
          <velocityMultiplierRange>0.8~1.2</velocityMultiplierRange>
          <rotationOverTimeRange>-180.0~180.0</rotationOverTimeRange>
          <scaleRange>1.5~3.0</scaleRange>
        </exhaustSettings>
      </li>
      <li Class="CompProperties_Breakdownable" />
    </comps>
  </ThingDef>

  <ThingDef ParentName="ThrusterBase">
    <defName>LargeThruster</defName>
    <label>large thruster</label>
    <description>An advanced chemfuel thruster with a heat-resistant vacstone liner. It greatly increases the range of a gravship. Thrusters require an unobstructed area free of large buildings and gravship substructure.\n\nRequires vacstone blocks, which can be obtained from orbital asteroids.\n\nA gravship can support up to six large thrusters.</description>
    <graphicData>
      <graphicClass>Graphic_Multi</graphicClass>
      <texPath>Things/Building/LateralThruster/LateralThruster</texPath>
      <drawSize>(2.2, 2.2)</drawSize>
      <shadowData>
        <volume>(1.8, 0.75, 1.8)</volume>
      </shadowData>
    </graphicData>
    <statBases>
      <MaxHitPoints>500</MaxHitPoints>
      <Flammability>0</Flammability>
      <Beauty>-10</Beauty>
      <WorkToBuild>13200</WorkToBuild>
      <Mass>30</Mass>
    </statBases>
    <size>(2, 2)</size>
    <constructionSkillPrerequisite>5</constructionSkillPrerequisite>
    <costList>
      <Steel>220</Steel>
      <BlocksVacstone>50</BlocksVacstone>
      <ComponentIndustrial>6</ComponentIndustrial>
    </costList>
    <researchPrerequisites>
      <li>StandardGravtech</li>
    </researchPrerequisites>
    <comps>
      <li Class="CompProperties_GravshipThruster">
        <statOffsets>
          <GravshipRange>16</GravshipRange>
        </statOffsets>
        <componentTypeDef>Thruster</componentTypeDef>
        <exclusionAreaSize>(2, 0, 7)</exclusionAreaSize>
        <exclusionAreaOffset>(0, 0, -7)</exclusionAreaOffset>
        <directionInfluence>30</directionInfluence>
        <flameSize>4.0</flameSize>
        <flameOffsetsPerDirection>
          <li>(0, 0, 1.0)</li>
          <li>(0, 0, 0.5)</li>
          <li>(0, 0, 0.5)</li>
          <li>(0, 0, 0.5)</li>
        </flameOffsetsPerDirection>
        <flameShaderType>MoteGlow</flameShaderType>
        <flameShaderParameters>
          <_MainTex>/Things/Mote/LargeThruster_Burn</_MainTex>
        </flameShaderParameters>
        <requiresLOS>false</requiresLOS>
        <maxSimultaneous>6</maxSimultaneous>
        <maxDistance>500</maxDistance>
        <exhaustSettings>
          <exhaustFleckDef>GravshipThrusterExhaust</exhaustFleckDef>
          <emissionsPerSecond>40.0</emissionsPerSecond>
          <spawnRadiusRange>0.0~0.5</spawnRadiusRange>
          <velocity>(0.0,0.0,-20.0)</velocity>
          <velocityRotationRange>-10.0~10.0</velocityRotationRange>
          <velocityMultiplierRange>0.8~1.2</velocityMultiplierRange>
          <rotationOverTimeRange>-180.0~180.0</rotationOverTimeRange>
          <scaleRange>3.0~5.0</scaleRange>
        </exhaustSettings>
      </li>
      <li Class="CompProperties_Breakdownable" />
    </comps>
    <uiOrder>2205</uiOrder>
  </ThingDef>
  
  <ThingDef ParentName="GravshipComponentBase">
    <defName>FuelOptimizer</defName>
    <label>fuel optimizer</label>
    <description>A gravtech unit that allows grav engine lift to coordinate more efficiently with traditional thrusters. It reduces the fuel needed for gravship flight.\n\nA gravship can support two fuel optimizers.</description>
    <graphicData>
      <graphicClass>Graphic_Multi</graphicClass>
      <texPath>Things/Building/FuelOptimizer/FuelOptimizer</texPath>
      <drawSize>(2, 2)</drawSize>
    </graphicData>
    <statBases>
      <MaxHitPoints>150</MaxHitPoints>
      <Flammability>0.3</Flammability>
      <Beauty>-10</Beauty>
      <Mass>50</Mass>
    </statBases>
    <costList>
      <Steel>100</Steel>
      <GravlitePanel>40</GravlitePanel>
      <ComponentSpacer>6</ComponentSpacer>
    </costList>
    <size>(2, 2)</size>
    <fillPercent>0.4</fillPercent>
    <passability>PassThroughOnly</passability>
    <pathCost>20</pathCost>
    <canOverlapZones>false</canOverlapZones>
    <terrainAffordanceNeeded>Substructure</terrainAffordanceNeeded>
    <comps>
      <li Class="CompProperties_GravshipFacility">
        <fuelSavingsPercent>0.3</fuelSavingsPercent>
        <requiresLOS>false</requiresLOS>
        <maxSimultaneous>2</maxSimultaneous>
        <maxDistance>500</maxDistance>
      </li>
    </comps>
    <tradeTags>
      <li>GravshipUpgrade</li>
    </tradeTags>
  </ThingDef>

  <ThingDef ParentName="GravshipComponentBase">
    <defName>SignalJammer</defName>
    <label>signal jammer</label>
    <description>A signal emitter that disguises the electromagnetic signature of your gravship, allowing it to approach heavily-defended landing sites.</description>
    <graphicData>
      <graphicClass>Graphic_Multi</graphicClass>
      <texPath>Things/Building/SignalJammer/SignalJammer</texPath>
      <drawSize>(2, 2)</drawSize>
    </graphicData>
    <statBases>
      <MaxHitPoints>400</MaxHitPoints>
      <Flammability>0.3</Flammability>
      <Beauty>-10</Beauty>
      <WorkToBuild>30000</WorkToBuild>
      <Mass>75</Mass>
    </statBases>
    <size>(2, 2)</size>
    <constructionSkillPrerequisite>8</constructionSkillPrerequisite>
    <resourcesFractionWhenDeconstructed>1</resourcesFractionWhenDeconstructed>
    <fillPercent>0.6</fillPercent>
    <passability>PassThroughOnly</passability>
    <pathCost>20</pathCost>
    <canOverlapZones>false</canOverlapZones>
    <designationCategory>Odyssey</designationCategory>
    <costList>
      <Gravcore>1</Gravcore>
      <Steel>200</Steel>
      <GravlitePanel>80</GravlitePanel>
      <ComponentSpacer>4</ComponentSpacer>
    </costList>
    <researchPrerequisites>
      <li>AdvancedGravtech</li>
    </researchPrerequisites>
    <terrainAffordanceNeeded>Substructure</terrainAffordanceNeeded>
    <comps>
      <li Class="CompProperties_GravshipFacility">
        <requiresLOS>false</requiresLOS>
        <componentTypeDef>SignalJammer</componentTypeDef>
        <maxSimultaneous>1</maxSimultaneous>
        <maxDistance>500</maxDistance>
      </li>
    </comps>
    <uiOrder>2400</uiOrder>
  </ThingDef>

  <ThingDef ParentName="GravshipComponentBase">
    <defName>GravcorePowerCell</defName>
    <label>gravcore power cell</label>
    <description>A power generator that passively draws a small amount of energy from gravitational waves passing through the gravship.</description>
    <graphicData>
      <graphicClass>Graphic_Single</graphicClass>
      <texPath>Things/Building/GravcorePowerCell</texPath>
      <drawSize>(1, 1)</drawSize>
    </graphicData>
    <tickerType>Normal</tickerType>
    <statBases>
      <MaxHitPoints>200</MaxHitPoints>
      <Flammability>0.3</Flammability>
      <Beauty>-5</Beauty>
      <WorkToBuild>4000</WorkToBuild>
      <Mass>15</Mass>
    </statBases>
    <size>(1, 1)</size>
    <constructionSkillPrerequisite>8</constructionSkillPrerequisite>
    <resourcesFractionWhenDeconstructed>1</resourcesFractionWhenDeconstructed>
    <fillPercent>0.4</fillPercent>
    <passability>PassThroughOnly</passability>
    <pathCost>20</pathCost>
    <canOverlapZones>false</canOverlapZones>
    <designationCategory>Power</designationCategory>
    <costList>
      <Gravcore>1</Gravcore>
      <GravlitePanel>50</GravlitePanel>
      <ComponentSpacer>2</ComponentSpacer>
      <Steel>60</Steel>
    </costList>
    <researchPrerequisites>
      <li>AdvancedGravtech</li>
    </researchPrerequisites>
    <terrainAffordanceNeeded>Substructure</terrainAffordanceNeeded>
    <comps>
      <li Class="CompProperties_Power">
        <compClass>CompPowerPlantGravcore</compClass>
        <basePowerConsumption>-1200</basePowerConsumption>
        <transmitsPower>true</transmitsPower>
      </li>
    </comps>
    <uiOrder>2300</uiOrder>
  </ThingDef>

  <ThingDef ParentName="GravshipComponentBase">
    <defName>PilotSubpersonaCore</defName>
    <label>pilot subpersona core</label>
    <description>A low-grade subpersona specialized in gravship flight. It reduces the chance of an accident when flying a gravship, though it can't fully account for human error.\n\nA gravship can support up to two pilot subpersona cores.</description>
    <graphicData>
      <graphicClass>Graphic_Single</graphicClass>
      <texPath>Things/Building/PilotSubpersonaCore</texPath>
      <drawSize>(1, 1)</drawSize>
    </graphicData>
    <statBases>
      <MaxHitPoints>100</MaxHitPoints>
      <Flammability>0.7</Flammability>
      <Mass>20</Mass>
    </statBases>
    <costList>
      <Steel>50</Steel>
      <GravlitePanel>20</GravlitePanel>
      <ComponentSpacer>4</ComponentSpacer>
    </costList>
    <size>(1, 1)</size>
    <fillPercent>0.4</fillPercent>
    <passability>PassThroughOnly</passability>
    <pathCost>20</pathCost>
    <canOverlapZones>false</canOverlapZones>
    <terrainAffordanceNeeded>Substructure</terrainAffordanceNeeded>
    <comps>
      <li Class="CompProperties_GravshipFacility">
        <requiresLOS>false</requiresLOS>
        <maxSimultaneous>2</maxSimultaneous>
        <maxDistance>500</maxDistance>
      </li>
      <li Class="CompProperties_Power">
        <compClass>CompPowerTrader</compClass>
        <basePowerConsumption>30</basePowerConsumption>
      </li>
    </comps>
    <tradeTags>
      <li>GravshipUpgrade</li>
    </tradeTags>
  </ThingDef>

  <ThingDef ParentName="GravshipComponentBase">
    <defName>GravshipShieldGenerator</defName>
    <label>gravship shield generator</label>
    <description>A shielding device that can protect a gravship. It modulates the grav field to create a short-lived momentum repulsor surface that blocks projectiles. It works against normal shots and mortars. Those inside can still shoot out.\n\nIt must be charged before use. One gravship can support two gravship shield generators.</description>
    <graphicData>
      <graphicClass>Graphic_Single</graphicClass>
      <texPath>Things/Building/GravshipShieldGenerator</texPath>
      <drawSize>(3, 3)</drawSize>
    </graphicData>
    <drawerType>MapMeshAndRealTime</drawerType>
    <drawOffscreen>true</drawOffscreen>
    <tickerType>Normal</tickerType>
    <statBases>
      <MaxHitPoints>250</MaxHitPoints>
      <Flammability>0.3</Flammability>
      <Mass>80</Mass>
    </statBases>
    <size>(3, 3)</size>
    <fillPercent>0.6</fillPercent>
    <passability>PassThroughOnly</passability>
    <pathCost>20</pathCost>
    <canOverlapZones>false</canOverlapZones>
    <costList>
      <Steel>200</Steel>
      <GravlitePanel>80</GravlitePanel>
      <ComponentSpacer>8</ComponentSpacer>
    </costList>
    <terrainAffordanceNeeded>Substructure</terrainAffordanceNeeded>
    <specialDisplayRadius>24.9</specialDisplayRadius>
    <comps>
      <li Class="CompProperties_GravshipFacility">
        <requiresLOS>false</requiresLOS>
        <maxSimultaneous>2</maxSimultaneous>
        <maxDistance>500</maxDistance>
      </li>
      <li Class="CompProperties_Flickable" />
      <li Class="CompProperties_Power">
        <compClass>CompPowerTrader</compClass>
        <basePowerConsumption>200</basePowerConsumption>
      </li>
      <li Class="CompProperties_Interactable">
        <compClass>CompInteractable_GravshipShieldGenerator</compClass>
        <ticksToActivate>120</ticksToActivate>
        <jobString>activate</jobString>
        <activateTexPath>UI/Commands/ActivateGravshipShield</activateTexPath>
        <soundActivate>GravshipShieldGenerator_Activate</soundActivate>
        <requiresPower>false</requiresPower>
        <targetingParameters>
          <canTargetBuildings>false</canTargetBuildings>
          <canTargetAnimals>false</canTargetAnimals>
          <canTargetMechs>false</canTargetMechs>
          <onlyTargetControlledPawns>true</onlyTargetControlledPawns>
        </targetingParameters>
      </li>
      <li Class="CompProperties_ProjectileInterceptor">
        <compClass>CompGravshipShieldGenerator</compClass>
        <radius>24.9</radius>
        <interceptGroundProjectiles>true</interceptGroundProjectiles>
        <interceptAirProjectiles>true</interceptAirProjectiles>
        <color>(0.4, 0.4, 0.4)</color>
        <reactivateEffect>BulletShieldGenerator_Reactivate</reactivateEffect>
        <activeSound>BulletShield_Ambience</activeSound>
        <hitPoints>500</hitPoints>
        <hitPointsRestoreInstantlyAfterCharge>false</hitPointsRestoreInstantlyAfterCharge>
        <startWithMaxHitPoints>false</startWithMaxHitPoints>
        <chargeDurationTicks>10000</chargeDurationTicks><!-- 4 hours -->
        <minIdleAlpha>0.2</minIdleAlpha>
        <drawWithNoSelection>True</drawWithNoSelection>
        <disarmedByEmpForTicks>1500</disarmedByEmpForTicks>
        <gizmoTipKey>GravshipShieldTip</gizmoTipKey>
        <alwaysShowHitpointsGizmo>true</alwaysShowHitpointsGizmo>
        <rechargeHitPointsIntervalTicks>75</rechargeHitPointsIntervalTicks>

        <activated>true</activated>
        <activeDuration>6000</activeDuration> <!-- 100 seconds -->
      </li>
    </comps>
    <tradeTags>
      <li>GravshipUpgrade</li>
    </tradeTags>
  </ThingDef>

  <ThingDef ParentName="BuildingBase">
    <defName>GravAnchor</defName>
    <label>grav anchor</label>
    <description>Prevents the local map from being destroyed during a gravship launch.\n\nGrav anchors passively reduce unstable gravitation shear in a large area, which prevents the damaging effects of a gravship launch. It can't be constructed on the gravship itself because it would prevent flight entirely.</description>
    <graphicData>
      <graphicClass>Graphic_Single</graphicClass>
      <texPath>Things/Building/GravAnchor</texPath>
      <drawSize>(4, 4)</drawSize>
    </graphicData>
    <size>(4, 4)</size>
    <terrainAffordanceNeeded>Heavy</terrainAffordanceNeeded>
    <statBases>
      <MaxHitPoints>500</MaxHitPoints>
      <WorkToBuild>38000</WorkToBuild>
      <Flammability>0</Flammability>
      <Beauty>-10</Beauty>
    </statBases>
    <costList>
      <Plasteel>300</Plasteel>
      <GravlitePanel>80</GravlitePanel>
      <ComponentSpacer>5</ComponentSpacer>
    </costList>
    <building>
      <destroySound>BuildingDestroyed_Metal_Big</destroySound>
    </building>
    <altitudeLayer>Building</altitudeLayer>
    <fillPercent>0.6</fillPercent>
    <passability>PassThroughOnly</passability>
    <pathCost>50</pathCost>
    <designationCategory>Odyssey</designationCategory>
    <researchPrerequisites>
      <li>BasicGravtech</li>
    </researchPrerequisites>
    <uiOrder>2500</uiOrder>
    <placeWorkers>
      <li>PlaceWorker_InvalidOverSubstructure</li>
    </placeWorkers>
  </ThingDef>

</Defs>