<?xml version="1.0" encoding="utf-8"?>

<Defs>

  <TileMutatorDef Abstract="True" Name="AncientStructureMutBase">
    <categories>
      <li>AncientStructure</li>
    </categories>
    <biomeWhitelist>
      <li>AridShrubland</li>
      <li>BorealForest</li>
      <li>ColdBog</li>
      <li>Desert</li>
      <li>ExtremeDesert</li>
      <li>Glowforest</li>
      <li>Grasslands</li>
      <li>GlacialPlain</li>
      <li>LavaField</li>
      <li>Scarlands</li>
      <li>TemperateForest</li>
      <li>TemperateSwamp</li>
      <li>TropicalRainforest</li>
      <li>TropicalSwamp</li>
      <li>Tundra</li>
    </biomeWhitelist>
  </TileMutatorDef>

  <TileMutatorDef ParentName="AncientStructureMutBase">
    <defName>AncientGarrison</defName>
    <label>ancient garrison</label>
    <description>A long-abandoned military structure. It may still contain valuable items, as well as active security systems. Use caution while exploring these ruins.</description>
    <workerClass>TileMutatorWorker_AncientStructure</workerClass>
    <structureGenParms>
      <structureLayoutDef>AncientGarrison</structureLayoutDef>
      <structureSizeRange>40~50</structureSizeRange>
      <scatteredPrefabs>
        <li>
          <countPer10kCellsRange>1~1</countPer10kCellsRange>
          <minSpacing>10</minSpacing>
          <maxDistFromStructure>50</maxDistFromStructure>
          <prefabs>
            <Exterior_AncientBunker>
              <weight>1.0</weight>
              <indoorRuin>false</indoorRuin>
              <filthDef>Filth_MachineBits</filthDef>
              <filthExpandBy>1</filthExpandBy>
              <filthChance>0.4</filthChance>
              <max>1</max>
            </Exterior_AncientBunker>
            <Exterior_AncientTankTraps>
              <weight>0.5</weight>
              <indoorRuin>false</indoorRuin>
              <filthDef>Filth_MachineBits</filthDef>
              <filthExpandBy>1</filthExpandBy>
              <filthChance>0.4</filthChance>
              <max>1</max>
            </Exterior_AncientTankTraps>
            <Exterior_AncientTankBlockade>
              <weight>0.5</weight>
              <indoorRuin>false</indoorRuin>
              <filthDef>Filth_MachineBits</filthDef>
              <filthExpandBy>1</filthExpandBy>
              <filthChance>0.4</filthChance>
              <max>1</max>
            </Exterior_AncientTankBlockade>
            <Exterior_MilitaryBlockade>
              <weight>0.5</weight>
              <indoorRuin>false</indoorRuin>
              <filthDef>Filth_MachineBits</filthDef>
              <filthExpandBy>1</filthExpandBy>
              <filthChance>0.4</filthChance>
              <max>2</max>
            </Exterior_MilitaryBlockade>
            <Exterior_AncientMegaCannonEmplacement>
              <weight>3.0</weight>
              <indoorRuin>false</indoorRuin>
              <filthDef>Filth_MachineBits</filthDef>
              <filthExpandBy>1</filthExpandBy>
              <filthChance>0.4</filthChance>
              <max>4</max>
            </Exterior_AncientMegaCannonEmplacement>
            <Exterior_AncientTank_Cluster>
              <weight>3.0</weight>
              <indoorRuin>false</indoorRuin>
              <filthDef>Filth_MachineBits</filthDef>
              <filthExpandBy>1</filthExpandBy>
              <filthChance>0.4</filthChance>
              <max>1</max>
            </Exterior_AncientTank_Cluster>
          </prefabs>
        </li>
      </scatteredPrefabs>
      <perimeterWallDef>AncientRazorWire</perimeterWallDef>
      <perimeterExpandBy>5</perimeterExpandBy>
      <perimeterWallChance>0.9</perimeterWallChance>
      <perimeterTerrainDef>AncientConcrete</perimeterTerrainDef>
      <perimeterScatterTerrain>
        <Soil>
          <groupsPerHundredCells>0~1</groupsPerHundredCells>
          <itemsPerGroup>2~3</itemsPerGroup>
          <groupDistRange>2~3</groupDistRange>
        </Soil>
      </perimeterScatterTerrain>
      <perimeterScatteredThings>
        <AncientMortar>3</AncientMortar>
        <AncientBarrel>2</AncientBarrel>
        <AncientMilitaryBarrier>3</AncientMilitaryBarrier>
        <ChunkSlagSteel>5</ChunkSlagSteel>
        <Filth_OilSmear>2</Filth_OilSmear>
        <Filth_BlastMark>1</Filth_BlastMark>
        <AncientTank>1</AncientTank>
      </perimeterScatteredThings>
    </structureGenParms>
  </TileMutatorDef>

  <TileMutatorDef ParentName="AncientStructureMutBase">
    <defName>AncientWarehouse</defName>
    <label>ancient warehouse</label>
    <description>An abandoned warehouse. It still contains valuables. It may also contain dangerous security systems.</description>
    <workerClass>TileMutatorWorker_AncientStructure</workerClass>
    <structureGenParms>
      <structureLayoutDef>AncientWarehouse</structureLayoutDef>
      <structureSizeRange>45~65</structureSizeRange>
      <scatteredPrefabs>
        <li>
          <countPer10kCellsRange>1~1</countPer10kCellsRange>
          <minSpacing>10</minSpacing>
          <maxDistFromStructure>50</maxDistFromStructure>
          <prefabs>
            <Exterior_AncientContainerForklift>
              <weight>1.0</weight>
              <indoorRuin>false</indoorRuin>
              <filthDef>Filth_MachineBits</filthDef>
              <filthExpandBy>1</filthExpandBy>
              <filthChance>0.4</filthChance>
              <max>3</max>
            </Exterior_AncientContainerForklift>
            <Exterior_ContainerSite>
              <weight>1.0</weight>
              <indoorRuin>false</indoorRuin>
              <filthDef>Filth_MachineBits</filthDef>
              <filthExpandBy>1</filthExpandBy>
              <filthChance>0.4</filthChance>
              <max>1</max>
            </Exterior_ContainerSite>
          </prefabs>
        </li>
      </scatteredPrefabs>
      <perimeterWallDef>AncientFence</perimeterWallDef>
      <perimeterExpandBy>8</perimeterExpandBy>
      <perimeterWallChance>0.95</perimeterWallChance>
      <perimeterTerrainDef>AncientConcrete</perimeterTerrainDef>
      <perimeterScatteredThings>
        <AncientBarrel>8</AncientBarrel>
        <AncientChemtruck>2</AncientChemtruck>
        <AncientMediumContainer>6</AncientMediumContainer>
        <AncientLargeContainer>4</AncientLargeContainer>
        <AncientOpenContainer>6</AncientOpenContainer>
        <ChunkSlagSteel>5</ChunkSlagSteel>
        <AncientForklift>6</AncientForklift>
        <AncientIndustrialTruck>4</AncientIndustrialTruck>
        <Filth_OilSmear>2</Filth_OilSmear>
      </perimeterScatteredThings>
    </structureGenParms>
  </TileMutatorDef>

  <TileMutatorDef ParentName="AncientStructureMutBase">
    <defName>AncientChemfuelRefinery</defName>
    <label>ancient chemfuel refinery</label>
    <description>An abandoned industrial installation containing large quantities of chemfuel. It may also contain dangerous security systems.</description>
    <workerClass>TileMutatorWorker_AncientStructure</workerClass>
    <structureGenParms>
      <structureLayoutDef>AncientChemfuelRefinery</structureLayoutDef>
      <structureSizeRange>40~50</structureSizeRange>
      <scatteredPrefabs>
        <li>
          <countPer10kCellsRange>1~1</countPer10kCellsRange>
          <minSpacing>10</minSpacing>
          <maxDistFromStructure>50</maxDistFromStructure>
          <prefabs>
            <Exterior_ChemtruckParkingLot>
              <weight>1.0</weight>
              <indoorRuin>false</indoorRuin>
              <filthDef>Filth_OilSmear</filthDef>
              <filthExpandBy>1</filthExpandBy>
              <filthChance>0.05</filthChance>
              <max>1</max>
            </Exterior_ChemtruckParkingLot>
            <Exterior_ChemtruckParkingLot_Long>
              <weight>2.0</weight>
              <indoorRuin>false</indoorRuin>
              <filthDef>Filth_OilSmear</filthDef>
              <filthExpandBy>1</filthExpandBy>
              <filthChance>0.05</filthChance>
              <max>2</max>
            </Exterior_ChemtruckParkingLot_Long>
            <Exterior_ChembarrelStorage>
              <weight>1.0</weight>
              <indoorRuin>false</indoorRuin>
              <filthDef>Filth_OilSmear</filthDef>
              <filthExpandBy>1</filthExpandBy>
              <filthChance>0.05</filthChance>
              <max>3</max>
            </Exterior_ChembarrelStorage>
            <Exterior_ChembarrelStorageBuilding>
              <weight>2.0</weight>
              <indoorRuin>true</indoorRuin>
              <filthDef>Filth_OilSmear</filthDef>
              <filthExpandBy>1</filthExpandBy>
              <filthChance>0.05</filthChance>
              <max>1</max>
            </Exterior_ChembarrelStorageBuilding>
            <Exterior_AncientContainerForklift>
              <weight>1.0</weight>
              <indoorRuin>false</indoorRuin>
              <filthDef>Filth_MachineBits</filthDef>
              <filthExpandBy>1</filthExpandBy>
              <filthChance>0.4</filthChance>
              <max>1</max>
            </Exterior_AncientContainerForklift>
            <Exterior_ContainerSite>
              <weight>1.0</weight>
              <indoorRuin>false</indoorRuin>
              <filthDef>Filth_MachineBits</filthDef>
              <filthExpandBy>1</filthExpandBy>
              <filthChance>0.4</filthChance>
              <max>1</max>
            </Exterior_ContainerSite>
          </prefabs>
        </li>
      </scatteredPrefabs>
      <perimeterWallDef>AncientFence</perimeterWallDef>
      <perimeterExpandBy>3</perimeterExpandBy>
      <perimeterWallChance>0.95</perimeterWallChance>
      <perimeterTerrainDef>AncientTile</perimeterTerrainDef>
      <perimeterScatteredThings>
        <AncientChembarrel>20</AncientChembarrel>
        <AncientChemtruck>1</AncientChemtruck>
        <AncientIndustrialTruck>1</AncientIndustrialTruck>
        <Filth_OilSmear>1</Filth_OilSmear>
      </perimeterScatteredThings>
      <perimeterScatterTerrain>
        <AncientConcrete>
          <groupsPerHundredCells>0~1</groupsPerHundredCells>
          <itemsPerGroup>3~8</itemsPerGroup>
          <groupDistRange>2~3</groupDistRange>
        </AncientConcrete>
      </perimeterScatterTerrain>
    </structureGenParms>
  </TileMutatorDef>
  
  <TileMutatorDef ParentName="AncientStructureMutBase">
    <defName>AncientInfestedSettlement</defName>
    <label>infested settlement</label>
    <description>A once-prosperous settlement that was destroyed by an insect infestation. It may still contain valuable resources.</description>
    <workerClass>TileMutatorWorker_AncientStructure</workerClass>
    <categories Inherit="False" /> <!-- Remove the AncientStructure category so this isn't chosen for ancient mercenaries quest -->
    <requiresFactionOfDef>Insect</requiresFactionOfDef>
    <structureGenParms>
      <structureLayoutDef>AncientInfestedSettlement</structureLayoutDef>
      <structureSizeRange>36~44</structureSizeRange>
      <scatteredPrefabs>
        <li>
          <countPer10kCellsRange>0.2~0.4</countPer10kCellsRange>
          <minSpacing>0</minSpacing>
          <maxDistFromStructure>24</maxDistFromStructure>
          <prefabs>
            <Exterior_BurrowWallCluster_Medium>
              <weight>2.0</weight>
              <indoorRuin>false</indoorRuin>
              <filthDef>Filth_BloodInsect</filthDef>
              <filthExpandBy>1</filthExpandBy>
              <filthChance>0.05</filthChance>
              <max>3</max>
            </Exterior_BurrowWallCluster_Medium>
            <Exterior_BurrowWallCluster_Large>
              <weight>1.0</weight>
              <indoorRuin>false</indoorRuin>
              <filthDef>Filth_BloodInsect</filthDef>
              <filthExpandBy>1</filthExpandBy>
              <filthChance>0.05</filthChance>
              <max>3</max>
            </Exterior_BurrowWallCluster_Large>
            <Exterior_BurrowWallGenerator>
              <weight>1.0</weight>
              <indoorRuin>false</indoorRuin>
              <filthDef>Filth_BloodInsect</filthDef>
              <filthExpandBy>1</filthExpandBy>
              <filthChance>0.05</filthChance>
              <max>3</max>
            </Exterior_BurrowWallGenerator>
            <Exterior_BurrowWallFarm>
              <weight>0.5</weight>
              <indoorRuin>true</indoorRuin>
              <filthDef>Filth_BloodInsect</filthDef>
              <filthExpandBy>1</filthExpandBy>
              <filthChance>0.05</filthChance>
              <max>1</max>
            </Exterior_BurrowWallFarm>
          </prefabs>
        </li>
      </scatteredPrefabs>
      <perimeterExpandBy>2</perimeterExpandBy>
      <perimeterTerrainDef>AncientConcrete</perimeterTerrainDef>
      <perimeterScatteredThings>
        <GlowPod>1</GlowPod>
        <AncientGenerator>3</AncientGenerator>
        <AncientSecurityTurret>3</AncientSecurityTurret>
        <Filth_BloodInsect>10</Filth_BloodInsect>
      </perimeterScatteredThings>
      <perimeterScatterTerrain>
        <InsectSludge>
          <groupsPerHundredCells>1~2</groupsPerHundredCells>
          <itemsPerGroup>10~15</itemsPerGroup>
          <groupDistRange>2~3</groupDistRange>
        </InsectSludge>
      </perimeterScatterTerrain>
    </structureGenParms>
  </TileMutatorDef>

  <TileMutatorDef ParentName="AncientStructureMutBase">
    <defName>AncientLaunchSite</defName>
    <label>ancient launch site</label>
    <description>An abandoned collection of launch pads used to deliver supplies to orbital platforms. It contains working transport pods.</description>
    <workerClass>TileMutatorWorker_AncientStructure</workerClass>
    <categories>
      <li>AncientStructure</li>  
    </categories>
    <biomeBlacklist>
      <li>IceSheet</li>
      <li>SeaIce</li>
    </biomeBlacklist>
    <canSpawnOnRiver>false</canSpawnOnRiver>
    <structureGenParms>
      <structureLayoutDef>AncientLaunchSite</structureLayoutDef>
      <structureSizeRange>35~55</structureSizeRange>
      <scatteredPrefabs>
        <li>
          <countPer10kCellsRange>1~1</countPer10kCellsRange>
          <minSpacing>35</minSpacing>
          <maxDistFromStructure>60</maxDistFromStructure>
          <prefabs>
            <Exterior_AncientLaunchSite_LaunchPad_Large>
              <weight>1.0</weight>
              <indoorRuin>false</indoorRuin>
              <filthDef>Filth_RubbleRock</filthDef>
              <filthExpandBy>0</filthExpandBy>
              <filthChance>0.05</filthChance>
              <max>2</max>
            </Exterior_AncientLaunchSite_LaunchPad_Large>
            <Exterior_AncientLaunchSite_LaunchPad_Small>
              <weight>1.0</weight>
              <indoorRuin>false</indoorRuin>
              <filthDef>Filth_RubbleRock</filthDef>
              <filthExpandBy>0</filthExpandBy>
              <filthChance>0.05</filthChance>
              <max>2</max>
            </Exterior_AncientLaunchSite_LaunchPad_Small>
          </prefabs>
        </li>
      </scatteredPrefabs>
      <perimeterExpandBy>2</perimeterExpandBy>
      <perimeterWallDef>AncientFence</perimeterWallDef>
      <perimeterWallChance>0.95</perimeterWallChance>
      <perimeterScatteredThings>
        <AncientChembarrel>20</AncientChembarrel>
        <AncientChemtruck>1</AncientChemtruck>
        <AncientIndustrialTruck>1</AncientIndustrialTruck>
        <Filth_OilSmear>1</Filth_OilSmear>
      </perimeterScatteredThings>
      <perimeterScatterTerrain>
        <AncientConcrete>
          <groupsPerHundredCells>0~1</groupsPerHundredCells>
          <itemsPerGroup>3~8</itemsPerGroup>
          <groupDistRange>2~3</groupDistRange>
        </AncientConcrete>
      </perimeterScatterTerrain>
    </structureGenParms>
  </TileMutatorDef>

</Defs>